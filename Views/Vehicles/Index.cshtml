@{
    ViewData["Title"] = "EG - RTO | Vehicles";
}
<h2 class="text-start">Welcome, Admin.</h2>
<hr />
<h2>Vehicles Lists</h2>
<script src="./js/Knockout.js"></script>
<!-- Button to open the Add Vehicle modal -->
<button data-bind="click: openAddVehicleModal" class="">Add Vehicle <i class="fa fa-plus"></i></button>
<!-- Search Box -->
<!-- Search Field -->
<!-- Search Bar Container -->
<div class="search-container">
    <input type="text" id="searchBar" placeholder=" Search vehicles..." data-bind="value: searchQuery, valueUpdate: 'input'" class="search-input">
    @* <button id="searchButton" class="search-button">Search</button> *@
</div>

<!-- Modal for adding or editing vehicles -->
<div id="addVehicleModal" style="display:none;">
    <h3>Add/Edit Vehicle</h3>
    <form data-bind="submit: saveVehicle" id="vehicleForm">
        <label>License Plate:</label>
        <input type="text" data-bind="value: newVehicle.licensePlate" placeholder="Ex : KA19MF8008" required />
        <div class="error-message" id="licensePlateError"></div>

        <label>Model:</label>
        <input type="text" data-bind="value: newVehicle.model" placeholder="Ex : 2024" required />
        <div class="error-message" id="modelError"></div>

        <label>Owner:</label>
        <input type="text" data-bind="value: newVehicle.owner" placeholder="Ex : Aaron Sharon Dsouza" required />
        <div class="error-message" id="ownerError"></div>

        <label>Owner Address:</label>
        <input type="text" data-bind="value: newVehicle.ownerAddress" placeholder="Ex : Ajanta, Mangalore" required />
        <div class="error-message" id="ownerAddressError"></div>

        <label>Owner Contact Number:</label>
        <input type="text" data-bind="value: newVehicle.ownerContactNumber" placeholder="Ex : 900090009" required />
        <div class="error-message" id="ownerContactNumberError"></div>

        <label>Owner Email:</label>
        <input type="email" data-bind="value: newVehicle.ownerEmail" placeholder="eg@eg.dk" required />
        <div class="error-message" id="ownerEmailError"></div>

        <label>Vehicle Name:</label>
        <input type="text" data-bind="value: newVehicle.vehicleName" placeholder="Ex : Bullet" required />
        <div class="error-message" id="vehicleNameError"></div>

        <label>Price:</label>
        <input type="number" data-bind="value: newVehicle.price" placeholder="60000" step="0.01" required />
        <div class="error-message" id="priceError"></div>

        @*  <label>Registration Date:</label>
        <input type="datetime-local" data-bind="value: newVehicle.registrationDate" required /> *@

        <button type="submit" id="submitButton" disabled>Save Vehicle</button>
        <button type="button" data-bind="click: closeAddVehicleModal">Cancel</button>
    </form>
</div>

<!-- Button to fetch all vehicles -->
@* <button data-bind="click: fetchVehicles">Fetch All Vehicles</button> *@

<!-- Table to display fetched vehicles -->
<table>
    <thead>
        <tr>
            <th>License Plate</th>
            <th>Model</th>
            <th>Owner</th>
            <th>Owner Address</th>
            <th>Owner Contact Number</th>
            <th>Owner Email</th>
            <th>Vehicle Name</th>
            <th>Price</th>
            @* <th>Registration Date</th> *@
            <th>Actions</th><!-- Add a header for actions -->
        </tr>
    </thead>
    <tbody data-bind="foreach: filteredVehicles">
        <tr>
            <td data-bind="text: licensePlate"></td>
            <td data-bind="text: model"></td>
            <td data-bind="text: owner"></td>
            <td data-bind="text: ownerAddress"></td>
            <td data-bind="text: ownerContactNumber"></td>
            <td data-bind="text: ownerEmail"></td>
            <td data-bind="text: vehicleName"></td>
            <td data-bind="text: price"></td>
            @* <td data-bind="text: registrationDate"></td> *@
            <td>
                <button data-bind="click: $parent.deleteVehicle">Delete</button>
                <button data-bind="click: $parent.editVehicle">Edit</button>
            </td>
        </tr>
    </tbody>

</table>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script><!-- Ensure this line is present -->
<script src="https://cdn.jsdelivr.net/npm/knockout@3.5.1/build/output/knockout-latest.js"></script>
<script src="./js/app.js"></script>
<script>
   
</script>

<style>
    /* Basic styling for modal */
    #addVehicleModal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
        z-index: 1000;
        display: none; /* Initially hidden */
    }
</style>

<script>
   
</script>




@* 
@{
    ViewData["Title"] = "Vehicles";
}
<h2 class="text-center my-4">Vehicles</h2>

<!-- Add Bootstrap CSS link -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Add Knockout.js -->
<script src="https://cdn.jsdelivr.net/npm/knockout@3.5.1/build/output/knockout-latest.js"></script>

<!-- Button to open the Add Vehicle modal -->
<div class="text-center mb-3">
    <button class="btn btn-primary" data-bind="click: openAddVehicleModal">Add Vehicle</button>
</div>

<!-- Modal for adding or editing vehicles -->
<div id="addVehicleModal" class="modal fade" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add/Edit Vehicle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form data-bind="submit: saveVehicle">
                    <div class="mb-3">
                        <label for="licensePlate" class="form-label">License Plate:</label>
                        <input type="text" class="form-control" id="licensePlate" data-bind="value: newVehicle.licensePlate"  />
                    </div>

                    <div class="mb-3">
                        <label for="model" class="form-label">Model:</label>
                        <input type="text" class="form-control" id="model" data-bind="value: newVehicle.model"  />
                    </div>

                    <div class="mb-3">
                        <label for="owner" class="form-label">Owner:</label>
                        <input type="text" class="form-control" id="owner" data-bind="value: newVehicle.owner"  />
                    </div>

                    <div class="mb-3">
                        <label for="ownerAddress" class="form-label">Owner Address:</label>
                        <input type="text" class="form-control" id="ownerAddress" data-bind="value: newVehicle.ownerAddress"  />
                    </div>

                    <div class="mb-3">
                        <label for="ownerContactNumber" class="form-label">Owner Contact Number:</label>
                        <input type="text" class="form-control" id="ownerContactNumber" data-bind="value: newVehicle.ownerContactNumber"  />
                    </div>

                    <div class="mb-3">
                        <label for="ownerEmail" class="form-label">Owner Email:</label>
                        <input type="email" class="form-control" id="ownerEmail" data-bind="value: newVehicle.ownerEmail"  />
                    </div>

                    <div class="mb-3">
                        <label for="vehicleName" class="form-label">Vehicle Name:</label>
                        <input type="text" class="form-control" id="vehicleName" data-bind="value: newVehicle.vehicleName"  />
                    </div>

                    <div class="mb-3">
                        <label for="price" class="form-label">Price:</label>
                        <input type="number" class="form-control" id="price" data-bind="value: newVehicle.price" step="0.01"  />
                    </div>

                    <div class="mb-3">
                        <label for="registrationDate" class="form-label">Registration Date:</label>
                        <input type="datetime-local" class="form-control" id="registrationDate" data-bind="value: newVehicle.registrationDate"  />
                    </div>

                    <div class="d-flex justify-content-between">
                        <button type="submit" class="btn btn-primary">Save Vehicle</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Button to fetch all vehicles -->
<div class="text-center mb-3">
    <button class="btn btn-success" data-bind="click: fetchVehicles">Fetch All Vehicles</button>
</div>

<!-- Table to display fetched vehicles -->
<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>License Plate</th>
                <th>Model</th>
                <th>Owner</th>
                <th>Owner Address</th>
                <th>Owner Contact Number</th>
                <th>Owner Email</th>
                <th>Vehicle Name</th>
                <th>Price</th>
                <th>Registration Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: vehicles">
            <tr>
                <td data-bind="text: licensePlate"></td>
                <td data-bind="text: model"></td>
                <td data-bind="text: owner"></td>
                <td data-bind="text: ownerAddress"></td>
                <td data-bind="text: ownerContactNumber"></td>
                <td data-bind="text: ownerEmail"></td>
                <td data-bind="text: vehicleName"></td>
                <td data-bind="text: price"></td>
                <td data-bind="text: registrationDate"></td>
                <td>
                    <!-- Add the delete and edit buttons -->
                    <button class="btn btn-danger btn-sm" data-bind="click: $parent.deleteVehicle">Delete</button>
                    <button class="btn btn-warning btn-sm" data-bind="click: $parent.editVehicle">Edit</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
 *@
<!-- Add Bootstrap and JS for Modal Functionality -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

<script>
    // Knockout ViewModel and functions will go here
</script>

<style>
    /* Custom modal styling */
    #addVehicleModal {
        max-width: 700px;
        margin: auto;
    }
</style>












































